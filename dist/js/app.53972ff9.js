(function(t){function e(e){for(var i,r,o=e[0],c=e[1],u=e[2],h=0,p=[];h<o.length;h++)r=o[h],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&p.push(s[r][0]),s[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(p.length)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(i=!1)}i&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},s={app:0},a=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"138d":function(t,e,n){},3086:function(t,e,n){"use strict";n("9092")},"37ba":function(t,e,n){"use strict";n("b50b")},4341:function(t,e,n){"use strict";n("138d")},"49d5":function(t,e,n){"use strict";n("e146")},"56d7":function(t,e,n){"use strict";n.r(e);n("5035"),n("73ba"),n("a0d5"),n("4465");var i=n("35dd"),s=n("4ada"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("transition",{attrs:{name:t.transitionName,mode:this.$router.back?"out-in":"in-out"}},[n("router-view",{staticClass:"view"})],1)],1)},r=[],o=(n("dfec"),{created:function(){var t=JSON.parse(localStorage.getItem("goods"))||{};this.$store.commit("setCounterMap",t)},data:function(){return{transitionName:"left"}},watch:{$route:function(t,e){"Classification"===t.name&&"Search"===e.name&&(this.$router.back=!0),this.$router.back?this.transitionName="right":this.transitionName="left",this.$router.back=!1}}}),c=o,u=(n("7c55"),n("1569")),l=Object(u["a"])(c,a,r,!1,null,null,null),h=l.exports,p=n("132a"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-container"},[n("router-view"),n("Navigation")],1)},f=[],m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navigation-container"},[n("van-tabbar",{attrs:{route:"",fixed:""}},[n("van-tabbar-item",{attrs:{to:{name:"Home"},icon:"wap-home-o"}},[t._v("首页")]),n("van-tabbar-item",{attrs:{to:{name:"Classification"},icon:"apps-o"}},[t._v("分类")]),n("van-tabbar-item",{attrs:{to:{name:"Shopping"},badge:t.badge,icon:"shopping-cart-o",id:"shop-car"}},[t._v(" 购物车")]),n("van-tabbar-item",{attrs:{to:{name:"My"},icon:"user-circle-o"}},[t._v("我的")])],1)],1)},g=[],v=(n("6462"),{computed:{badge:function(){var t=this.$store.state.counterMap,e=Object.values(t).reduce((function(t,e){return t+e}),0);return e>99?"99+":e}}}),b=v,y=Object(u["a"])(b,m,g,!1,null,null,null),L=y.exports,k={components:{Navigation:L}},j=k,x=Object(u["a"])(j,d,f,!1,null,null,null),C=x.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"classification-container"},[n("div",{staticClass:"search-wap"},[n("router-link",{staticClass:"search-btn",attrs:{to:{name:"Search"},custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.navigate;return[n("div",{attrs:{role:"link"},on:{click:i,keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:i.apply(null,arguments)}}},[n("van-icon",{attrs:{name:"search"}}),n("div",[t._v("苹果特价1元1斤")])],1)]}}])})],1),n("OneTab"),t.showContent?[n("twoBar"),n("ShopList")]:n("van-loading",{attrs:{vertical:""}})],2)},w=[],S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"oneTab",staticClass:"one-tab-container"},t._l(t.menuList,(function(e,i){return n("div",{key:e.title,staticClass:"item",class:{active:t.index===i},on:{touchend:function(e){return t.handleEnd(i,e)},touchmove:function(e){t.move=!0},touchstart:function(e){t.move=!1}}},[n("div",{staticClass:"image"},[n("img",{attrs:{src:e.imgURL}})]),n("div",{staticClass:"title"},[t._v(" "+t._s(e.title)+" ")])])})),0)},$=[],O=n("8511"),R=n("bbf5");function M(t,e,n,i){var s=0,a=5;e<0&&(a*=-1);var r=setInterval((function(){s+=a,n[i]=t+s,Math.abs(s)>Math.abs(e)&&(n[i]=t+e,clearInterval(r))}),2)}var E={data:function(){return{index:0,move:!1,menuList:[{title:"时令水果",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/时令水果.jpg"},{title:"酒水冲调",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/酒水冲调.jpg"},{title:"安心乳品",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/安心乳品.jpg"},{title:"休闲零食",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/休闲零食.jpg"},{title:"肉蛋食材",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/肉蛋食材.jpg"},{title:"新鲜蔬菜",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/新鲜食材.jpg"},{title:"熟食餐饮",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/熟食餐饮.jpg"},{title:"海鲜水产",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/海鲜水产.jpg"},{title:"粮油调味",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/粮油调味.jpg"},{title:"某手美食",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/某手美食.jpg"},{title:"纸杯清洁",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/纸品清洁.jpg"},{title:"个人护理",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/个人护理.jpg"},{title:"美妆护肤",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/美妆护肤.jpg"},{title:"家居收纳",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/家居收纳.jpg"},{title:"家用电器",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/家用电器.jpg"},{title:"3C数码",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/3C数码.jpg"},{title:"母婴用品",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/母婴用品.jpg"},{title:"鲜花绿植",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/鲜花绿植.jpg"},{title:"宠物用品",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/宠物用品.jpg"},{title:"图书玩具",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/图书文具.jpg"},{title:"手表配饰",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/手表配饰.jpg"}]}},methods:Object(O["a"])(Object(O["a"])({},Object(R["b"])(["setBarList"])),{},{handleEnd:function(t,e){if(!this.move){this.index=t;var n=this.$refs.oneTab.offsetWidth,i=e.target.getBoundingClientRect().left,s=e.target.offsetWidth,a=s/2+i-n/2;M(this.$refs.oneTab.scrollLeft,a,this.$refs.oneTab,"scrollLeft"),this.$store.commit("resetShopList"),this.setBarList(this.menuList[t].title)}}}),created:function(){this.$store.commit("resetShopList"),this.setBarList(this.menuList[0].title)}},T=E,U=(n("37ba"),Object(u["a"])(T,S,$,!1,null,"ce2881bc",null)),B=U.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"twobar",staticClass:"twobar-container"},t._l(t.barList,(function(e,i){return n("div",{key:e,class:{active:i===t.index},on:{touchend:function(e){return t.handleEnd(i,e)},touchstart:function(e){t.move=!1},touchmove:function(e){t.move=!0}}},[t._v(" "+t._s(0===i?"全部":e)+" ")])})),0)},I=[],N={computed:Object(O["a"])({},Object(R["c"])({barList:function(t){return t.barList}})),data:function(){return{index:0,move:!1}},methods:{handleEnd:function(t,e){if(!this.move){this.index=t;var n=this.$refs.twobar,i=e.target.getBoundingClientRect().top,s=e.target.offsetHeight,a=n.getBoundingClientRect().top,r=n.offsetHeight,o=i+s/2-a-r/2;M(n.scrollTop,o,n,"scrollTop"),this.$store.commit("resetShopList"),this.$store.dispatch("setShopList",{type:this.barList[t],page:1,size:10,sort:"all"})}}}},H=N,A=(n("dea5"),Object(u["a"])(H,z,I,!1,null,"02a078d2",null)),P=A.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shop-list-container"},[n("TopScreen",{on:{handleClick:t.handleEnd}}),n("div",{staticClass:"shop-list-box"},[n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.dataList.shopList,(function(e){return n("shopCard",t._b({key:e.id,attrs:{num:t.dataList.counterMap[e.id]}},"shopCard",e,!1))})),1)],1)],1)],1)},X=[],Y=n("0efa"),J=(n("dd51"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"top-screen-container"},[n("ul",t._l(t.shopScreen,(function(e,i){return n("li",{key:i,class:{active:i===t.index},on:{touchend:function(e){return t.handleEnd(i)}}},[t._v(t._s(e.title)+" "),e.child?[n("span",{staticClass:"top",class:{activeTop:e.top}}),n("span",{staticClass:"bottom",class:{activeBottom:e.bottom}})]:t._e()],2)})),0)])}),D=[],W={data:function(){return{index:0,count:0,shopScreen:[{title:"综合",type:"all"},{title:"销量",type:"sale"},{title:"价格",name:"",child:!0,top:!1,bottom:!1,type:"price-up"}]}},methods:{handleEnd:function(t){this.$emit("handleClick",this.shopScreen[t]),this.index=t,this.changeActive()},changeActive:function(){2===this.index?(this.shopScreen[2].top=!0,this.shopScreen[2].bottom=!1,this.shopScreen[2].type="price-down",this.count+=1,this.count%2===0&&(this.shopScreen[2].bottom=!0,this.shopScreen[2].top=!1,this.shopScreen[2].type="price-up")):(this.shopScreen[2].top=!1,this.shopScreen[2].bottom=!1)}}},F=W,q=(n("8865"),Object(u["a"])(F,J,D,!1,null,"42362e60",null)),V=q.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shop-card-container"},[n("div",{staticClass:"shop-list"},[n("div",{staticClass:"image"},[n("img",{ref:"image",attrs:{src:t.images[0]}})]),n("div",{staticClass:"title"},[n("h3",{staticClass:"title-item"},[t._v(t._s(t.title))]),n("p",{staticClass:"desc"},[t._v(t._s(t.desc))]),n("div",{staticClass:"tags"},t._l(t.tags,(function(e){return n("div",{key:e},[t._v(" "+t._s(e)+" ")])})),0),n("div",{staticClass:"price"},[n("span",[t._v(t._s("¥"+t.price))])]),n("div",{staticClass:"counter"},[t.num?n("span",{on:{touchend:function(e){return t.handleCounter(t.id,-1)}}},[n("van-icon",{staticClass:"minus",attrs:{name:"minus"}})],1):t._e(),t.num?n("span",{staticClass:"num"},[t._v(t._s(t.num))]):t._e(),n("span",{on:{touchend:function(e){return t.handleCounter(t.id,1)}}},[n("van-icon",{staticClass:"plus",attrs:{name:"plus"}})],1)])])])])},Q=[],Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.exist?n("div",{staticClass:"animate-container",style:{width:t.width+"px",height:t.height+"px",opacity:t.opacity,transform:"translate("+t.moveX+"px, "+t.moveY+"px) scale("+t.sx+", "+t.sy+")"}},[n("img",{attrs:{src:t.src}})]):t._e()},tt=[],et={},nt=et,it=(n("92df"),Object(u["a"])(nt,Z,tt,!1,null,"7c791ba1",null)),st=it.exports,at=i["a"].extend(st),rt=function(t){var e=t.startX,n=t.startY,i=t.endX,s=t.endY,a=t.src,r=t.width,o=t.height,c=new at({el:document.createElement("div"),data:function(){return{moveX:e,moveY:n,sx:1,sy:1,opacity:1,exist:!0,src:a,width:r,height:o}}});document.body.appendChild(c.$el),setTimeout((function(){c.moveX=i,c.moveY=s,c.sx=.1,c.sy=.1,c.opacity=0}),0),setTimeout((function(){c.exist=!1}),1100)},ot={props:["images","tags","title","price","desc","id","num","nofly"],methods:{handleCounter:function(t,e){if(this.$store.commit("storyChange",{id:t,value:e}),-1!==e&&!this.nofly){var n=this.$refs.image,i=n.offsetWidth,s=n.offsetHeight,a=this.$refs.image.getBoundingClientRect(),r=a.left,o=a.top,c=document.getElementById("shop-car"),u=c.offsetWidth,l=c.offsetHeight,h=c.getBoundingClientRect(),p=h.left,d=h.top,f=u/2+p,m=l/2+d;rt({startX:r,startY:o,endX:f,endY:m,src:this.$refs.image.src,width:i,height:s})}}}},ct=ot,ut=(n("49d5"),Object(u["a"])(ct,K,Q,!1,null,"46ecc732",null)),lt=ut.exports,ht={data:function(){return{page:1,size:10,type:"all",isLoading:!1,loading:!1,finished:!1}},components:{TopScreen:V,shopCard:lt},computed:{dataList:function(){return{shopList:this.$store.state.shopList,barList:this.$store.state.barList,counterMap:this.$store.state.counterMap}}},methods:{onRefresh:function(){this.isLoading=!0,this.loading=!1,this.finished=!1,this.page=1,this.$store.commit("resetShopList"),this.$store.dispatch("setShopList",{page:1,size:this.size,sort:this.type}),this.isLoading=!1},onLoad:function(){var t=this;return Object(Y["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("a"),t.page+=1,t.loading=!0,e.next=5,t.$store.dispatch("setShopList",{page:t.page,size:t.size,sort:t.type});case 5:n=e.sent,n?t.loading=!1:t.finished=!0;case 7:case"end":return e.stop()}}),e)})))()},handleEnd:function(t){this.type=t.type,this.onRefresh()}}},pt=ht,dt=(n("6ae5"),Object(u["a"])(pt,G,X,!1,null,"7612a380",null)),ft=dt.exports,mt={components:{OneTab:B,TwoBar:P,ShopList:ft},computed:{showContent:function(){return this.$store.state.showContent},barList:function(){return this.$store.state.barList}},watch:{showContent:function(){this.showContent&&(this.$store.commit("resetShopList"),this.$store.dispatch("setShopList",{type:this.barList[0],page:1,size:10,sort:"all"}))}}},gt=mt,vt=(n("d7d9"),Object(u["a"])(gt,_,w,!1,null,"74274130",null)),bt=vt.exports,yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shopping-container"},[n("div",{staticClass:"nav-top"},[n("van-nav-bar",{attrs:{title:"购物车","right-text":"删除"},on:{"click-right":t.del}})],1),n("div",{staticClass:"shop-list"},[n("van-checkbox-group",{ref:"checkboxGroup",model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.list,(function(e){return n("div",{key:e.id,staticClass:"shop-box"},[n("van-checkbox",{staticClass:"check",attrs:{name:e.id}}),n("shop-card",t._b({attrs:{num:t.counterMap[e.id],nofly:!0}},"shop-card",e,!1))],1)})),0)],1),n("van-submit-bar",{attrs:{price:t.allMoney,"button-text":"去结算("+t.totalNum+")"},on:{submit:t.onSubmit}},[n("van-checkbox",{on:{click:t.checkAll},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("全选")])],1)],1)},Lt=[],kt=(n("ec39"),n("7f12"),n("9902"),n("f985"),n("af30"),n("8c96"),n("33bf")),jt=n("a878"),xt={components:{shopCard:lt},data:function(){return{result:[],list:[],checked:!1}},watch:{result:function(){this.result.length===this.list.length?this.checked=!0:this.checked=!1}},methods:{del:function(){var t=this;return Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.result.length){e.next=3;break}return Object(kt["a"])("你没有选中商品"),e.abrupt("return");case 3:return e.prev=3,e.next=6,jt["a"].confirm({message:"您是否要删除已选中的商品"});case 6:t.result.forEach((function(e){t.$store.commit("storyChange",{id:e,value:-1/0}),t.list=t.list.filter((function(e){return!t.result.includes(e.id)}))})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),Object(kt["a"])("您点击了取消");case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))()},getAllData:function(){var t=this;return Object(Y["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object.keys(t.counterMap),e.next=3,t.$api.getGoodsByIds(n.join());case 3:i=e.sent,t.list=i.list;case 5:case"end":return e.stop()}}),e)})))()},onSubmit:function(){},checkAll:function(){this.checked?this.$refs.checkboxGroup.toggleAll(!0):this.$refs.checkboxGroup.toggleAll(!1)}},computed:{counterMap:function(){return this.$store.state.counterMap},allMoney:function(){var t=this,e=this.list.filter((function(e){return t.result.includes(e.id)}));return e.reduce((function(e,n){var i=t.counterMap[n.id]||0;return Math.round(i*n.price*100)+e}),0)},totalNum:function(){var t=this,e=this.list.filter((function(e){return t.result.includes(e.id)})),n=e.reduce((function(e,n){return e+(t.counterMap[n.id]||0)}),0);return n}},created:function(){this.getAllData()}},Ct=xt,_t=(n("dc40"),Object(u["a"])(Ct,yt,Lt,!1,null,"d8c55e2a",null)),wt=_t.exports,St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-container"},[t._v(" 我的 ")])},$t=[],Ot={},Rt=Ot,Mt=Object(u["a"])(Rt,St,$t,!1,null,null,null),Et=Mt.exports,Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-container"},[n("div",{staticClass:"top"},[n("van-icon",{staticClass:"icon",attrs:{name:"arrow-left"},on:{click:function(e){return t.$router.goBack()}}}),n("van-search",{staticClass:"search-box",attrs:{"show-action":"",placeholder:t.place},on:{search:t.onSearch,input:function(e){return t.onInput(t.value)},focus:t.onFocus},scopedSlots:t._u([t.showList?{key:"action",fn:function(){return[n("span",{on:{touchend:function(e){return t.onSearch(t.value)}}},[t._v("搜索")])]},proxy:!0}:{key:"action",fn:function(){return[n("span",{staticClass:"shop-car",on:{click:function(e){return t.$router.push("/home/shopping")}}},[n("van-icon",{attrs:{name:"shopping-cart-o",id:"shop-car",badge:t.badge}})],1)]},proxy:!0}],null,!0),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t.likeList.length&&t.showList?n("div",{staticClass:"like-list"},[n("van-list",t._l(t.likeList,(function(e){return n("van-cell",{key:e,on:{click:function(n){return t.onSearch(e)}}},[[n("span",{staticClass:"item-color",domProps:{innerHTML:t._s(t.formatHTML(e))}})]],2)})),1)],1):t._e(),t.showList?t._e():n("div",{staticClass:"search-list"},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.shopList,(function(e){return n("shopCard",t._b({key:e.id,attrs:{num:t.counterMap[e.id]}},"shopCard",e,!1))})),1)],1),t.likeList.length<=0&&t.showList?n("div",{staticClass:"history"},[n("my-history",{attrs:{searchList:t.searchList},on:{search:t.onSearch}})],1):t._e()])},Ut=[],Bt=n("4c00"),zt=(n("7607"),n("ccdc"),n("751e"),n("aac4"),n("3228"),n("7f5f"),n("03ee"),n("31e0"),n("79bc"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"history"},[n("h4",[t._v("历史记录：")]),t._l(t.searchList,(function(e){return n("div",{key:e.time,staticClass:"his-item",on:{click:function(n){return t.search(e.value)}}},[t._v(" "+t._s(e.value))])}))],2)}),It=[],Nt={props:{searchList:{default:function(){return[]}}},methods:{search:function(t){this.$emit("search",t)}}},Ht=Nt,At=(n("4341"),Object(u["a"])(Ht,zt,It,!1,null,"7b765fb9",null)),Pt=At.exports,Gt={components:{shopCard:lt,MyHistory:Pt},data:function(){return{place:"酒",value:this.place,likeList:[],timer:null,loading:!1,finished:!1,page:1,size:5,shopList:[],showList:!0,total:0,searchList:[]}},computed:{counterMap:function(){return this.$store.state.counterMap},badge:function(){var t=this.$store.state.counterMap,e=Object.values(t).reduce((function(t,e){return t+e}),0);return e>99?"99+":e}},created:function(){this.searchList=JSON.parse(localStorage.getItem("searchList"))||[]},methods:{onLoad:function(){var t=this;return Object(Y["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showList=!1,e.next=3,t.$api.search(t.value,t.page,t.size);case 3:n=e.sent,t.shopList=[].concat(Object(Bt["a"])(t.shopList),Object(Bt["a"])(n.list)),t.total=n.total,t.loading=!1,t.shopList.length>=t.total?t.finished=!0:t.page+=1;case 8:case"end":return e.stop()}}),e)})))()},onSearch:function(t){var e=this;this.value=t||this.place;var n=this.searchList.find((function(t){return t.value===e.value}));n?(n.time=(new Date).getTime(),this.searchList.sort((function(t,e){return e.time-t.time}))):(this.searchList.unshift({value:this.value,time:(new Date).getTime()}),this.searchList.length>=11&&this.searchList.pop()),localStorage.setItem("searchList",JSON.stringify(this.searchList)),this.likeList=[],this.shopList=[],this.page=1,this.finished=!1,this.loading=!0,this.onLoad()},onInput:function(){var t=this;return Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t.value){e.next=3;break}return t.likeList=[],e.abrupt("return");case 3:t.timer?(clearTimeout(t.timer),t.timer=null):t.timer=setTimeout(Object(Y["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.likeSearch(t.value);case 2:n=e.sent,t.likeList=n.result,clearTimeout(t.timer),t.timer=null;case 6:case"end":return e.stop()}}),e)}))),300);case 4:case"end":return e.stop()}}),e)})))()},onFocus:function(){this.showList=!0},formatHTML:function(t){var e=new RegExp(this.value);return t.replace(e,this.value.fontcolor("red"))}}},Xt=Gt,Yt=(n("3086"),Object(u["a"])(Xt,Tt,Ut,!1,null,"829e498e",null)),Jt=Yt.exports;p["a"].prototype.back=!1,p["a"].prototype.goBack=function(){this.back=!0,this.go(-1)},i["a"].use(p["a"]);var Dt=[{path:"/home",component:C,name:"Home",children:[{path:"classification",component:bt,name:"Classification"},{path:"shopping",component:wt,name:"Shopping"},{path:"my",component:Et,name:"My"}]},{path:"/search",component:Jt,name:"Search"},{path:"*",redirect:"/home"}],Wt=new p["a"]({mode:"history",base:"",routes:Dt}),Ft=Wt,qt=n("5318"),Vt=n.n(qt),Kt="xuejp_1631502225673",Qt=Vt.a.create({baseURL:"https://mallapi.duyiedu.com/goods/",params:{appkey:Kt}});Qt.interceptors.request.use((function(t){return t})),Qt.interceptors.response.use((function(t){return t.data}));var Zt=Qt,te={getBarList:function(t){return Zt.get("/getsidebar",{params:{type:t}})}},ee={getList:function(t,e,n,i){return Zt.get("/getGoodsList",{params:{type:t,page:e,size:n,sort:i}})}};i["a"].use(R["a"]);var ne=new R["a"].Store({state:{barList:[],showContent:!1,shopList:[],type:null,counterMap:{}},mutations:{setBarList:function(t,e){t.barList=e},setShowContent:function(t,e){t.showContent=e},setShopList:function(t,e){t.shopList=[].concat(Object(Bt["a"])(t.shopList),Object(Bt["a"])(e))},resetShopList:function(t){t.shopList=[]},setShopType:function(t,e){t.type=e},setCounterMap:function(t,e){t.counterMap=e},storyChange:function(t,e){var n=e.id,s=e.value;t.counterMap[n]?-1===s&&1===t.counterMap[n]||s===-1/0?i["a"].delete(t.counterMap,n):i["a"].set(t.counterMap,n,t.counterMap[n]+s):i["a"].set(t.counterMap,n,1),localStorage.setItem("goods",JSON.stringify(t.counterMap))}},actions:{setBarList:function(t,e){return Object(Y["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit("setShowContent",!1),n.next=3,te.getBarList(e);case 3:i=n.sent,t.commit("setBarList",i),t.commit("setShowContent",!0);case 6:case"end":return n.stop()}}),n)})))()},setShopList:function(t,e){return Object(Y["a"])(regeneratorRuntime.mark((function n(){var i,s,a,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.page,s=e.size,a=e.sort,r=e.type||t.state.type,n.next=4,ee.getList(r,i,s,a);case 4:if(o=n.sent,t.commit("setShopList",o.list),t.commit("setShopType",r),!(o.total>t.state.shopList.length)){n.next=9;break}return n.abrupt("return",!0);case 9:return n.abrupt("return",!1);case 10:case"end":return n.stop()}}),n)})))()}},modules:{}}),ie=(n("9190"),n("b551"),{search:function(t,e,n){return Zt.get("/search",{params:{type:t,page:e,size:n}})},likeSearch:function(t){return Zt.get("/likeSearch",{params:{likeValue:t}})},getGoodsByIds:function(t){return Zt.get("/getGoodsByIds",{params:{value:t}})}});i["a"].use(s["a"]),i["a"].prototype.$api=ie,i["a"].config.productionTip=!1,new i["a"]({router:Ft,store:ne,render:function(t){return t(h)}}).$mount("#app")},"61d9":function(t,e,n){},"6ae5":function(t,e,n){"use strict";n("fa3f")},"6aea":function(t,e,n){},"7c55":function(t,e,n){"use strict";n("f0b2")},8865:function(t,e,n){"use strict";n("61d9")},9092:function(t,e,n){},"92df":function(t,e,n){"use strict";n("c784")},afab:function(t,e,n){},b50b:function(t,e,n){},c784:function(t,e,n){},d7d9:function(t,e,n){"use strict";n("afab")},dc40:function(t,e,n){"use strict";n("6aea")},dea5:function(t,e,n){"use strict";n("e2a2")},e146:function(t,e,n){},e2a2:function(t,e,n){},f0b2:function(t,e,n){},fa3f:function(t,e,n){}});
//# sourceMappingURL=app.53972ff9.js.map